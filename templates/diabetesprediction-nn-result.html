{% extends "base.html" %}

{% block content %}
<div v-if="loading">
    <div id="loading-overlay">
        <div id="loading-spinner"></div>
    </div>
</div>

<div class="section-padding" id="main-content">
    <div class="container">
        <div class="row justify-content-center">

            <div class="col-lg-5 col-23 pe-lg-5">
                <div class="contact-info">
                    <h3 class="mb-4 text-center">{{ title }}</h3>

                    <h3 class="mb-4 text-center">Probability:</h3>
                    <h1 class="text-center mx-auto" style="width: fit-content;">{{ prediction }}</h1>

                    <div class="d-grid mt-5">
                        <a href="{{ url_for('diabetes_prediction_nn') }}" class="btn btn-danger text-center">Back</a>
                    </div>

                </div>
            </div>

            <!-- <div class="col-lg-5 col-12 mt-5 mt-lg-0">
                <h3 class="mb-4 text-center">Probability:</h3>
                <h1 class="text-center mx-auto" style="width: fit-content;">{% raw %} {{ probability }} {% endraw %} %</h1>
            </div> -->
        </div>

    </div>
</div>


{% endblock %}

{% block customjs %}
<script src="{{ url_for('static', filename='js/axios.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/vue.global.js') }}"></script>

<script>
    const { createApp } = Vue

createApp({
    data () {
        return {
            probability: 0.0,
            input: {
                gender: 0,
                age: 0,
                hypertension: 0,
                heart_disease: 1,
                smoke_history: 0,
                bmi: 0,
                HbA1c_level: 0,
                blood_glucose_level: 0
            },
            loading: false
        }
    },

    methods: {
        // async get_predicton() {
        //     const url = window.location.origin + "/predict/diabetes-prediction-lr"
        //     this.loading = true

        //     this.input.gender = + this.input.gender
        //     this.input.age = + this.input.age
        //     this.input.hypertension = + this.input.hypertension
        //     this.input.heart_disease = + this.input.heart_disease
        //     this.input.smoke_history = + this.input.smoke_history
        //     this.input.bmi = + this.input.bmi
        //     this.input.HbA1c_level = + this.input.HbA1c_level
        //     this.input.blood_glucose_level = + this.input.blood_glucose_level

        //     axios.post(url, this.input, {
        //         headers : {
        //             'Content-Type' : 'Application/json'
        //         }
        //     }).then(response => {
        //         this.probability = response.data.prediction
        //         this.probability *= 100
        //         this.probability = this.probability.toFixed(3)
        //         this.loading = false
        //     })

        // }
    }
}).mount("#app")
</script>

{% endblock %}